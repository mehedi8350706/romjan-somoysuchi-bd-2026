<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>{{ app_name }}</title>

<style>
body {
    background:#000;
    color:white;
    font-family:Poppins;
    text-align:center;
    padding:20px;
}

.waqt-card {
    background:rgba(255,255,255,0.05);
    margin:10px;
    padding:15px;
    border-radius:12px;
    border:1px solid rgba(255,255,255,0.1);
}

.active-waqt {
    border:2px solid gold;
    box-shadow:0 0 20px gold;
    transform:scale(1.03);
}

.countdown {
    margin-top:20px;
    font-size:18px;
    color:#FFD700;
}
</style>
</head>
<body>

<h2>{{ division }} - {{ district }}</h2>
<h3>{{ date_bn }} ({{ week }})</h3>

<div class="waqt-card" id="fajar-card">
    <h3>‡¶´‡¶ú‡¶∞</h3>
    <p id="fajar-time">{{ fajar_12 }}</p>
</div>

<div class="waqt-card" id="zohor-card">
    <h3>‡¶Ø‡ßã‡¶π‡¶∞</h3>
    <p id="zohor-time">{{ zohor_12 }}</p>
</div>

<div class="waqt-card" id="asor-card">
    <h3>‡¶Ü‡¶∏‡¶∞</h3>
    <p id="asor-time">{{ asor_12 }}</p>
</div>

<div class="waqt-card" id="magrib-card">
    <h3>‡¶Æ‡¶æ‡¶ó‡¶∞‡¶ø‡¶¨ (‡¶á‡¶´‡¶§‡¶æ‡¶∞)</h3>
    <p id="magrib-time">{{ magrib_12 }}</p>
</div>

<div class="waqt-card" id="esha-card">
    <h3>‡¶è‡¶∂‡¶æ</h3>
    <p id="esha-time">{{ esha_12 }}</p>
</div>

<div class="waqt-card">
    <h3>‡¶∏‡ßá‡¶π‡¶∞‡¶ø</h3>
    <p id="sehri-time">{{ sehri }}</p>
</div>

<div class="countdown" id="countdown">
‚è≥ ‡¶≤‡¶æ‡¶á‡¶≠ ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü‡¶°‡¶æ‡¶â‡¶® ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...
</div>

<script>
function parseTime(str){
    if(!str || str.includes("‡¶∏‡¶Æ‡ßü") || str.includes("‡¶∂‡ßÅ‡¶∞‡ßÅ")) return null;
    let [time, period] = str.split(" ");
    let [h,m] = time.split(":").map(Number);
    if(period==="PM" && h!==12) h+=12;
    if(period==="AM" && h===12) h=0;
    return h*60+m;
}

function nowMin(){
    let d=new Date();
    return d.getHours()*60+d.getMinutes();
}

function highlight(){
    let now=nowMin();
    let f=parseTime(fajar-time.innerText);
    let z=parseTime(zohor-time.innerText);
    let a=parseTime(asor-time.innerText);
    let m=parseTime(magrib-time.innerText);
    let e=parseTime(esha-time.innerText);

    document.querySelectorAll(".waqt-card").forEach(c=>c.classList.remove("active-waqt"));

    if(now>=e || now<f) esha-card.classList.add("active-waqt");
    else if(now>=f && now<z) fajar-card.classList.add("active-waqt");
    else if(now>=z && now<a) zohor-card.classList.add("active-waqt");
    else if(now>=a && now<m) asor-card.classList.add("active-waqt");
    else if(now>=m && now<e) magrib-card.classList.add("active-waqt");
}

function countdown(){
    let box=document.getElementById("countdown");
    setInterval(()=>{
        let now=new Date();
        let targetMin=parseTime(magrib-time.innerText);
        if(!targetMin) return;

        let target=new Date();
        target.setHours(Math.floor(targetMin/60), targetMin%60,0,0);
        if(target<=now) target.setDate(target.getDate()+1);

        let diff=target-now;
        let h=Math.floor(diff/1000/3600);
        let m=Math.floor((diff/1000%3600)/60);
        let s=Math.floor(diff/1000%60);

        box.innerText=`üçΩÔ∏è ‡¶á‡¶´‡¶§‡¶æ‡¶∞ ‡¶™‡¶∞‡ßç‡¶Ø‡¶®‡ßç‡¶§ ‡¶¨‡¶æ‡¶ï‡¶ø: ${h}‡¶ò ${m}‡¶Æ‡¶ø ${s}‡¶∏‡ßá`;
    },1000);
}

highlight();
countdown();
setInterval(highlight,60000);
</script>

</body>
</html>
