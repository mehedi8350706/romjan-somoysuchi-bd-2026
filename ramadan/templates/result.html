<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>{{ app_name }}</title>

<link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">

<style>
body{
    background: url("{{ url_for('static', filename='images/salam.jpg') }}") no-repeat center center fixed;
    background-size: cover;
    color: white;
    text-align: center;
}
.center-box{
    margin-top: 20px;
}
.row-flex{
    display: flex;
    justify-content: space-between;
    padding: 0 20px;
}
.waqt-card{
    background: rgba(0,0,0,0.5);
    margin: 10px;
    padding: 15px;
    border-radius: 12px;
}
.active{
    border: 2px solid gold;
    box-shadow: 0 0 25px gold;
}
.footer{
    margin-top: 40px;
    opacity: 0.8;
}
</style>
</head>
<body>

<div class="center-box">

    <!-- Division + District Center -->
    <h2>{{ division }} - {{ district }}</h2>

    <!-- Date -->
    <h3>{{ date_bn }}</h3>
    <p>{{ week }}</p>

    <!-- Roza + Tarabi -->
    <div class="row-flex">
        <div>ЁЯМЩ {{ roza }} рждржо рж░рзЛржЬрж╛</div>
        <div>ЁЯХМ {{ tarabi }} рждржо рждрж╛рж░рж╛ржмрзА</div>
    </div>

    <!-- Sehri + Iftar -->
    <div class="row-flex">
        <div>
            ЁЯН╜я╕П ржЗржлрждрж╛рж░: <span id="magrib-time">{{ iftar }}</span><br>
            <span id="iftar-countdown"></span>
        </div>
        <div>
            ЁЯМД рж╕рзЗрж╣рж░рж┐: <span id="sehri-time">{{ sehri }}</span><br>
            <span id="sehri-countdown"></span>
        </div>
    </div>

    <!-- 5 Waqt Namaz -->
    <div class="waqt-card" id="fajar-card">
        ржлржЬрж░ (рзи рж╕рзБржирзНржиржд + рзи ржлрж░ржЬ)<br>
        <span id="fajar">{{ fajar_12 }}</span>
        <div class="cd" id="cd-fajar"></div>
    </div>

    <div class="waqt-card" id="zohor-card">
        ржпрзЛрж╣рж░ (рзк рж╕рзБржирзНржиржд + рзк ржлрж░ржЬ + рзи рж╕рзБржирзНржиржд)<br>
        <span id="zohor">{{ zohor_12 }}</span>
        <div class="cd" id="cd-zohor"></div>
    </div>

    <div class="waqt-card" id="asor-card">
        ржЖрж╕рж░ (рзк ржлрж░ржЬ)<br>
        <span id="asor">{{ asor_12 }}</span>
        <div class="cd" id="cd-asor"></div>
    </div>

    <div class="waqt-card" id="magrib-card">
        ржорж╛ржЧрж░рж┐ржм (рзй ржлрж░ржЬ + рзи рж╕рзБржирзНржиржд)<br>
        <span id="magrib">{{ magrib_12 }}</span>
        <div class="cd" id="cd-magrib"></div>
    </div>

    <div class="waqt-card" id="esha-card">
        ржПрж╢рж╛ (рзк ржлрж░ржЬ + рзи рж╕рзБржирзНржиржд + рзй ржмрж┐рждрж░ + рждрж╛рж░рж╛ржмрзА)<br>
        <span id="esha">{{ esha_12 }}</span>
        <div class="cd" id="cd-esha"></div>
    </div>

</div>

<div class="footer">
    Developed by Mehedi Hasan
</div>

<script>
function parse(t){
 if(!t || t.includes("рж╕ржорзЯ") || t.includes("рж╢рзБрж░рзБ")) return null;
 let [time,p]=t.split(" ");
 let [h,m]=time.split(":").map(Number);
 if(p==="PM" && h!=12) h+=12;
 if(p==="AM" && h==12) h=0;
 return h*60+m;
}

function nowMin(){
 let d=new Date();
 return d.getHours()*60+d.getMinutes();
}

function highlight(){
 let n=nowMin();
 let f=parse(fajar.innerText);
 let z=parse(zohor.innerText);
 let a=parse(asor.innerText);
 let m=parse(magrib.innerText);
 let e=parse(esha.innerText);

 document.querySelectorAll(".waqt-card").forEach(c=>c.classList.remove("active"));

 // Your exact rule
 if(n>=e || n<f){
   esha-card.classList.add("active");
 }
 else if(n>=f && n<z){
   fajar-card.classList.add("active");
 }
 else if(n>=z && n<255){ // 4:15 PM = 16*60+15=975
   zohor-card.classList.add("active");
 }
 else if(n>=255 && n<m){
   asor-card.classList.add("active");
 }
 else if(n>=m && n<e){
   magrib-card.classList.add("active");
 }
}

setInterval(highlight,60000);
highlight();
</script>

</body>
</html>

